{
    "metadata": {
        "version": "1.0.0",
        "description": "Test cases for InserimentoDomandaService",
        "createdAt": "2025-12-08",
        "author": "Antigravity"
    },
    "testCases": [
        {
            "id": "TC_RF23_1_EMPTY_TITLE",
            "description": "Should throw BadRequestException if titolo is empty",
            "category": "error",
            "input": {
                "titolo": "",
                "testo": "Testo valido",
                "categoria": "Generale"
            },
            "expectedBehavior": {
                "exception": "BadRequestException",
                "message": "Il titolo è obbligatorio"
            }
        },
        {
            "id": "TC_RF23_1_LONG_TITLE",
            "description": "Should throw BadRequestException if titolo is longer than 64 chars",
            "category": "error",
            "input": {
                "titolo": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
                "testo": "Testo valido",
                "categoria": "Generale"
            },
            "expectedBehavior": {
                "exception": "BadRequestException",
                "message": "Il titolo non può superare 64 caratteri"
            }
        },
        {
            "id": "TC_RF23_2_EMPTY_TEXT",
            "description": "Should throw BadRequestException if testo is empty",
            "category": "error",
            "input": {
                "titolo": "Titolo valido",
                "testo": "   ",
                "categoria": "Generale"
            },
            "expectedBehavior": {
                "exception": "BadRequestException",
                "message": "Il testo è obbligatorio"
            }
        },
        {
            "id": "TC_RF23_3_EMPTY_CATEGORY",
            "description": "Should throw BadRequestException if categoria is empty",
            "category": "error",
            "input": {
                "titolo": "Titolo valido",
                "testo": "Testo valido",
                "categoria": ""
            },
            "expectedBehavior": {
                "exception": "BadRequestException",
                "message": "La categoria è obbligatoria"
            }
        },
        {
            "id": "TC_RF23_3_LONG_CATEGORY",
            "description": "Should throw BadRequestException if categoria is longer than 128 chars",
            "category": "error",
            "input": {
                "titolo": "Titolo valido",
                "testo": "Testo valido",
                "categoria": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
            },
            "expectedBehavior": {
                "exception": "BadRequestException",
                "message": "La categoria non può superare 128 caratteri"
            }
        },
        {
            "id": "TC_RF23_4_SUCCESS",
            "description": "Should insert question and award badges successfully",
            "category": "success",
            "input": {
                "dto": {
                    "titolo": "Titolo valido",
                    "testo": "Testo valido",
                    "categoria": "Generale"
                },
                "idPaziente": "paziente-123"
            },
            "mockData": {
                "newIdDomanda": "domanda-new-uuid",
                "awardedBadges": [
                    "Badge Nuovo"
                ]
            },
            "expectedOutput": {
                "success": true,
                "idDomanda": "domanda-new-uuid",
                "message": "Domanda pubblicata con successo nel forum"
            }
        },
        {
            "id": "TC_DB_ERROR",
            "description": "Should throw Error if database insertion fails",
            "category": "error",
            "input": {
                "dto": {
                    "titolo": "Titolo valido",
                    "testo": "Testo valido",
                    "categoria": "Generale"
                },
                "idPaziente": "paziente-123"
            },
            "mockData": {
                "dbReturn": []
            },
            "expectedBehavior": {
                "exception": "Error",
                "message": "Impossibile inserire la domanda nel forum"
            }
        },
        {
            "id": "TC_CTRL_DELEGATION",
            "description": "Should extract user ID and delegate to service",
            "category": "success",
            "input": {
                "req": {
                    "user": {
                        "id": "paziente-123"
                    }
                },
                "dto": {
                    "titolo": "Titolo valido",
                    "testo": "Testo valido",
                    "categoria": "Generale"
                }
            },
            "mockData": {
                "serviceReturn": {
                    "success": true,
                    "idDomanda": "domanda-new-uuid",
                    "message": "Domanda pubblicata con successo nel forum"
                }
            },
            "expectedOutput": {
                "success": true,
                "idDomanda": "domanda-new-uuid",
                "message": "Domanda pubblicata con successo nel forum"
            }
        }
    ]
}